# RunPod Serverless Configuration
# This file helps RunPod understand your deployment

name: GenVidIM-Wan22
description: Wan2.2 Video Generation API - Generate AI videos from text prompts

# Docker build configuration
build:
  dockerfile: serverless/Dockerfile
  context: .

# Runtime configuration
runtime:
  handler: serverless/handler.py
  python_version: "3.10"

# Resource requirements
resources:
  gpu: 1
  gpu_memory: 24GB  # Minimum for TI2V-5B model
  cpu: 8
  memory: 32GB
  disk: 50GB

# Scaling configuration
scaling:
  min_workers: 0      # Scale to zero when idle
  max_workers: 3      # Max concurrent workers
  idle_timeout: 30    # Seconds before scaling down

# Environment variables (add your secrets in RunPod UI)
env:
  MODEL_PATH: /workspace/Wan2.2-TI2V-5B
  PYTHONUNBUFFERED: "1"
